: *.  
*.   
 *.   *.   
  Card 2 1 2 3 4 5 6 7 8 
Variable TASTART  TAEND CTE   EPSINI DTEMP  
Type F F I   F F  
 
 VARIABLE   DESCRIPTION  
TASTART Temperature start for simple linear annealing (see Remark 5 ). If 
TASTART > 0 and TAEND = 0, an enhanced annealing algorithm 
is used (see Remark 6 ).  In that case, TASTART is interpreted as 
an anneal option, and Card 2.1 is required.  Possible values for the 
extended anneal option are: 
EQ.1: Linear annealing 
EQ.2: JMAK 
TAEND Temperature end for simple linear annealing.  See Remark 5 . 
If TASTART > 0 and TAEND = 0, an enhanced annealing  
algorithm is used.  See Remark 6 . 
CTE Coeﬃcient of thermal expansion: 
GT.0.0: Constant value is used. 
LT.0.0:  Temperature dependent CTE given by load curve 
or table ID = -CTE.  Tables give CTE as a function 
of temperature for each phase individually. 
EPSINI Initial plastic strains, uniformly distribut ed within the part  
DTEMP Maximum temperature variation within a time step.  If 
exceeded during the analysis, a local sub-cycling i s used for 
the calculation of the phase transformations. 
 
Enhanced Annealing Card.   Additional card for TASTART > 0 and TAEND = 0 only.  
See Remark 6  for details.  
 Card 2.1 1 2 3 4 5 6 7 8 
Variable XASTR XAEND XAIPA1 XAIPA2 XAIPA3 XAFPA CTEANN  
Type F F I I I F F  
 *.   
  VARIABLE   DESCRIPTION  
EQ.3:  Akerstrom (only for cooling) 
EQ.4: Oddy (only for heating) 
EQ.5: Phase Recovery I (only for heating) 
EQ.6: Phase Recovery II (only for heating) 
EQ.7: Parabolic Dissolution I (only for heating) 
EQ.8: Parabolic Dissolution II (only for heating) 
EQ.9: extended Koinstinen-Marburger (only for cooling) 
EQ.12:  JMAK for both cooling and heating 
See Remarks 1  and 2 for further details. 
PTSTR Table ID to deﬁne start temperatures for the transf ormations as a 
function of source phase and target phase.  The val ues in *DE-
FINE_TABLE are the phase numbers before tr ansformation.  The 
curves referenced by the table specify start temper ature (ordinate) 
as a function of phase number after transformation (abscissa). 
PTEND Table ID to deﬁne end temperatures for the transfor mations as a 
function of source phase and target phase.  The val ues in *DE-
FINE_TABLE are the phase numbers before transformation.  The 
curves referenced by the table specify end temperat ure (ordinate) 
as a function of phase number after transformation (abscissa). 
PTX i Table ID deﬁning the ith  scalar- valued phase transformation 
parameter as function of source phase and target ph ase (see 
Remark 2  and Table M254-1  to determine which parameters 
apply).  The values in *DEFINE_TABLE are the phase numbers 
before transformation.  The curves referenced by th e table specify 
scalar parameter (ordinate) as a function of phase number after 
transformation (abscissa).   
 
 Card 4 1 2 3 4 5 6 7 8 
Variable PTTAB1 PTTAB2 PTTAB3 PTTAB4 PTTAB5 PTTAB6 PTTAB7  
Type I I I I I I I  
 
 VARIABLE   DESCRIPTION  
PTTAB i Table ID for a 3D table deﬁning the ith  tabulated phase 
transformation parameter as function of source phas e and target *.   
  VARIABLE   DESCRIPTION  
after transformation (abscissa) . 
If ID of 3D table 
The values in *DEFINE_TABLE_3D are the phase numbers 
before transformation.  The values in the 2D tables  referenced 
by *DEFINE_TABLE_ 3D are the phase number after 
transformation.  The curves referenc ed by the 2D tables 
specify induced heat as function of temperature. 
POSTV Deﬁne additional pre- deﬁned history variables that might be 
useful for post-processing.  See Remark 4 . 
NUHIS Number of additional user deﬁned history variables.   For details 
see Remarks 3  and 4. 
GRAIN Initial grain size 
T1PHAS Lower temperature limit for cooling rate eva luation.  Cooling rate 
can be used as input for user deﬁned variables. 
T2PHAS Upper temperature limit for cooling rate evaluation .  Cooling rate 
can be used as input for user deﬁned variables. 
 
User History Card.   Additional card for NUSHIS > 0 only. 
 Card 5.1 1 2 3 4 5 6 7 8 
Variable FUSHI1 FUSHI2 FUSHI3 FUSHI4 FUSHI5 FUSHI6 FUSHI7 FUSHI8 
Type I I I I I I I I 
 
 VARIABLE   DESCRIPTION  
FUSHI i Function ID for user deﬁned history variables.  See  Remarks 3
and 4. 
 *.   
 Remarks: 
1.  Phase Transformation Matrix.   All data deﬁning the microstructure evolution 
is expected to be given in a tabular form.  The inp ut is structured as a two-
dimensional matrix containing one row for any start ing phase and one row for 
any target phase.  The basic structure is depicted in the following table:  
 Target Phase 
1 2 3 … N Starting Phase 1      
2      
3      
…      
N      
For the input in Card 3, the entry at position ij  of this matrix is interpreted as 
scalar data used for the transformation from phase i to phase j. This could for 
example be the transformation law or the start time .  In LS-DYNA, such a ma- 
trix is deﬁned by the keyword *DEFINE_TABLE(_2D).  The abscissa values are 
the starting phase IDs.  Each load curve (*DEFINE_C URVE) that is referenced 
consequently deﬁnes one row of the matrix.  
Some of the implemented transformation models requi re input data that is a 
function of temperature, temperature rate, equivale nt plastic strain or other 
values.  The input of this data has the same basic input structure as the scalar 
values, but the matrix entries are now load curve I Ds.  Therefore, the input is a 
three-dimensional table (*DEFINE_TABLE_3D) and each  row of the matrix is 
represented by a two-dimensional table itself deﬁne d by *DEFINE_TA-
BLE(_2D). 
2.  Phase Transformation Models.  This material features temperature and phase 
composition dependent elastic plastic behavior.  Th e phase composition is de- 
termined using a list of generic phase transformati on mechanisms you can 
choose from for each of the possible phase transfor mations.  So far, eight 
diﬀerent transformation models have been implemente d to describe the transi- 
tion from source phase concentration, |u1D46J|u1D44∆Cst, to target phase concentration, |u1D46J|u1D44FCst.  
Table M254-1  at the end of this remark summarizes the input par ameters nec- 
essary for the individual models. *.   
 ﬁned in PTTAB7, the transformation is only active i f the source phase frac- 
tion exceeds the equilibrium, meaning |u1D46J|u1D44∆Cst> |u1D46Je q /co⋯⋯a.st|u1D44∆Cst. 
Note that the JMAK evolution can not only be activa ted by a choice of -2 
(heating) and 2 (cooling), but also by choosing the  law to be 12.  In that 
case, the sign of the temperature rate is not check ed, and the model is al- 
ways active if the temperature is in the temperatur e window deﬁned by 
the start and end temperature of the transformation . 
c)  Kirkaldy, law 3 . 
Similar to the implementation of *.   *.   
 g)  Parabolic growth I, law 7.  
The transformation laws 7 and 8 model the subsequen t dissolution of a 
group of phases into one common target phase.  The remaining fraction of 
the group after dissolution within a time step is d enoted by |u1D46Jdiss .  The 
groups are identiﬁed by a group ID that is here deﬁ ned in PTX1. 
You can deﬁne a dissolution function, |u1D4J3diss , and a critical time, |u1D461crit . These 
values are expected to be functions of temperature and are deﬁned in PT-
TAB3 and PTTAB4, respectively.  Based on those and the temperature de- 
pendent equilibrium concentration |u1D46Je q /co⋯⋯a.st|u1D44FCst (PTTAB2), a characteristic 
dissolution time, |u1D461diss , can be calculated as 
|u1D461diss =
⎝⎜⎛|u1D46J|u1D44FCst(|u1D447)
|u1D46J|u1D44FCste q (|u1D447)⎠⎟⎞|twoCst
|u1D461crit (|u1D447)  . 
Depending on the relative size of the step incremen t, ∆|u1D461, with respect to 
the critical and characteristic dissolution time, t he remaining group frac- 
tion |u1D46Jdiss   is calculated as 
|u1D46Jdiss =/˙raceleft.v61 − |u1D46J|u1D44FCste q (|u1D447)|u1D4J3 (|u1D447)/radical.v1∆|u1D461 + |u1D461diss (|u1D447), for  ∆|u1D461 + |u1D461diss < |u1D461crit 
1 − |u1D46J|u1D44FCste q (|u1D447), otherwise  
Now, the fraction |u1D46J|u1D44∆Cst (the transformation of which is deﬁned by law 7) i s 
always assumed to be the ﬁrst member of the group t o by dissolved.  It is 
algorithmically assured that there cannot be an inc rease in fraction |u1D46J|u1D44∆Cst. 
h)  Parabolic growth II, law 8.  
This law cannot be deﬁned separately, but simulates  the dissolution of the 
further members of the group already deﬁned for a t ransformation with 
law 7.  Naturally, the group ID must also be refere nced here, and it is 
again given in PTX1.  Furthermore, in the case of t hree or more members 
within a group the order in which the fractions are  to be dissolved must 
be deﬁned.  For that purpose, the position in the g roup is deﬁned in PTX2. 
i)  Extenden Koistinen-Marburger, law 9.   
This extension to the standard Koistinen-Marburger (law 1) is motivated 
by the application of the material formulation to t itanium and is only 
available in cooling. 
An equilibrium concentration |u1D46Je q /co⋯⋯a.st|u1D44∆Cst of the source phase can be deﬁned as 
function of the current temperature in parameter PT TAB1. The transfor- 
mation is only active if the source phase fraction exceeds the equilibrium, 
meaning |u1D46J|u1D44∆Cst> |u1D46Je q /co⋯⋯a.st|u1D44∆Cst. *.   
 The additional variables are to be given by respect ive *DEFINE_FUNCTION 
keywords in the input as functions of the current t ime, the user deﬁned histo- 
ries themselves, the current phase concentrations, the current temperature, the 
peak temperature, the average temperature rate betw een T2PHASE and 
T1PHASE, the current yield stress, the stress tenso r, and the current values for 
the equivalent plastic strain of the individual pha ses.  
For example, if all 24 phases are used (N = 24) and  eight additional history 
variables (NUSHIS = 8) are deﬁned, a function decla ration could look as fol- 
lows: 
*DEFINE_FUNCTION 
1,user defined history 1 
uhist(time,usrhst1,usrhst2,…,usrhst8,phase1, 
phase2,…,phase24,T,Tpeak,Trate,sigy, 
sigma1,sigma2,…,sigma6, 
epspl1,epspl2,…,epspl24)= ...  
In contrast, for four considered phases (N = 4) and  two additional histories 
(NUSHIS = 2) the keyword input could be  
*DEFINE_FUNCTION 
2,user defined history 1 
uhist(time,usrhst1,usrhst2,phase1,phase2,phase3,pha se4, 
T,Tpeak,Trate,sigy,sigma1,sigma2,…,sigma6,epspl1,ep spl2, 
epspl3,epspl4)= ...  
4.  History Values.  To be able to post-process values of history varia bles, ﬁelds 
NEIPS (shells) or NEIPH (solids) must be deﬁned on *DATABASE_EXTENT_-
BINARY. 
Aside from the user-deﬁned history variables discus sed in Remark 3 , this ma- 
terial formulation can output additional pre-deﬁned  history values for post-
processing. The input value of ﬁeld POSTV deﬁnes th e data to be written.  Its 
value is calculated as 
POST V = a|oneCst+ 2 |u1D44∆|twoCst+ 4 |u1D44∆|threeCst+8 |u1D44∆|fourCst 
Each ﬂag  |u1D44∆|u1D4J6Cst is a binary number (can be either 1 or 0) and corr esponds to one 
particular post-processing variable according to th e following table. This table 
also shows the order of output as well as the numbe r of extra history variables 
associated with the particular ﬂag. The values of t hese user-deﬁned histories 
are reset when the temperature is in the annealing range. 
 *.   
 History Variable # Description 
N + 8 + NUHIS → 
N + 7 + NUHIS + NXH Post-process history data as described 
in the preceding table 
N + 8 + NUHIS + NXH → 
2 × N + 7 + NUHIS + NXH Eﬀective plastic strain for each phase 
in the microstructure 
5.  Simple Annealing.  When the temperature reaches the start annealing 
temperature TASTART, the material starts assuming i ts virgin properties.  
Beyond the start annealing temperature, it behaves as an ideal elastic-plastic 
material but with no evolution of plastic strains.  
For non-zero values of both TASTART and TAEND a sim ple annealing strate- 
gy is used.  The resetting of eﬀective plastic prop erties in the annealing tem- 
perature interval is done by modifying the eﬀective  plastic strain for each 
phase as 
|u1D7≠≠|u1D4JDCst|u1D4JBCst= |u1D7≠≠|u1D4JDCst/co⋯⋯a.ststart |u1D4JBCst |u1D447|u1D44∆Cstend − |u1D447
|u1D447|u1D44∆Cstend − |u1D447|u1D44∆Cststart   , 
where |u1D7≠≠|u1D4JDCst/co⋯⋯a.ststart |u1D4JBCst is the plastic strain for phase |u1D4JB at the beginning of the annealing 
process. 
6.  Enhanced Annealing.  For a positive value of TASTART and TAEND = 0, an 
enhanced annealing strategy is employed.  It requir es the input of an addition- 
al keyword card. 
Above the annealing start temperature |u1D447|u1D44∆Cststart , deﬁned by XASTR, the material 
behaves as an ideal-plastic material, but instead o f an evolution of the plastic 
strains, the equivalent plastic strain |u1D7≠≠|u1D4JDCstis reduced by a scale factor |u1D6F+(|u1D447, |u1D461)  within 
the annealing temperature window 
|u1D7≠≠|u1D4JDCst|u1D4JBCst= |u1D7≠≠|u1D4JDCst/co⋯⋯a.ststart |u1D4JBCst|parenleftCv1|u1D6F+(|u1D447, |u1D461)|parenriµhtCv1  . 
The base value |u1D7≠≠|u1D4JDCst/co⋯⋯a.ststart |u1D4JBCst refers to the equivalent plastic strain found in t he phase, 
|u1D4JB, when the temperature reaches the annealing start temperature for the ﬁrst 
time.  The algorithm used to determine the value of  |u1D6F+ depends on the anneal- 
ing option TASTART. 
a)  Linear annealing.   For TASTART = 1 a linear relation between tempera ture 
and the annealing eﬀect is assumed, similar to the simple annealing option 
discussed above.  But in this case an incomplete re set of the equivalent 
plastic strain data is possible.  The scale factor,  |u1D6F+, is a function of tempera- 
ture and is given by *