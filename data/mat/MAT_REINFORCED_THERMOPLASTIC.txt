 ..................... ................................................... ....... 2-1544  
*. _UDFIBER ............. ................................................. 2 -1570  
*.  [2] 
 *. _CRASH [2] 
 *. _UDFIBER [2] 
 *.  *. _UDFIBER *.   
 *.   *.   
  VARIABLE   DESCRIPTION  
AOPT Material axes option (see .   *.   
  VARIABLE   DESCRIPTION  
G12 Linear shear modulus for shearing between ﬁber fami lies 1 and 2 
LCG12 Curve ID for shear stress as a function of shearing  type as 
speciﬁed with METH12 between the 1 st  and 2 nd  ﬁbers.  See 
Remark 1 . 
ALOC12 Locking angle (in radians) for shear between  ﬁber families 1 and 2  
GLOC12 Linear shear modulus for shear angles larger  than ALOC12 
METH12 Option for shear response between ﬁber 1 and  2 (see Remark 1 ): 
EQ.0: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of the scalar product of the ﬁ ber di- 
rections.  
EQ.1:  Elasto- plastic shear response.  Curve LCG12 speciﬁes 
yield shear stress as a function of the normalized scalar 
product of the ﬁber directions. 
EQ.2: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of shear angle (radians) betwe e n the 
ﬁbers. 
EQ.3: Elasto- plastic shear response.  Curve LCG12 deﬁnes 
yield shear stress as a function of normalized shea r an- 
gle between the ﬁbers.  
EQ.4: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of shear angle (radians) between the 
ﬁbers.  This option is a special implementation for  non-
crimped fabrics, where one of the ﬁber families cor re- 
sponds to a stitching. 
EQ.5: Elasto- plastic shear response.  Curve LCG12 speciﬁes 
yield shear stress as a function of normalized shea r an- 
gle between the ﬁbers.  This option is a special im ple- 
mentation for non- crimped fabrics, where one of the 
ﬁber families corresponds to a stitching.  
EQ.10: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of shear angle (rad ians) between the 
ﬁbers.  This option is tailored for woven fabrics a nd 
guarantees a pure shear stress response.  
EQ.11: Elasto- plastic shear response.  Curve LCG12 speciﬁes 
yield shear stress as a function of normalized shea r an- 
gle.  This option is tailored for woven fabrics and  guar- *.   
  VARIABLE   DESCRIPTION  
LCG23 Curve ID for shear stress as a function of shearing  type as 
speciﬁes with METH23 between the 2 nd  and 3 rd  ﬁbers.  See 
Remark 1 . 
ALOC23 Locking angle (in radians) for shear between  ﬁber families 2 and 3  
GLOC23 Linear shear modulus for shear angles larger  than ALOC23 
METH23 Option for shear response between ﬁbers 2 and 3 (se e METH12 
for input options and Remark 1 ). 
 
 Card 8 1 2 3 4 5 6 7 8 
Variable IDF3 ALPH3 EF3 LCEF3 G23_3 G31_3   
Type I F F I F F   
 
 VARIABLE   DESCRIPTION  
IDF3 ID for 3 rd  ﬁber family for post-processing 
ALPH3 Orientation angle |u1D6F+|threeCst for 3 rd  ﬁber with respect to overall material 
direction 
EF3 Young’s modulus for 3 rd  ﬁber family 
LCEF3 Load curve for stress versus fiber strain  of 3 rd  ﬁber.  With this 
option active, EF3 is ignored.  If a curve, then it  speciﬁes input 
stress as a function of ﬁber strain.  If a table, t hen temperatures 
are the table values indexing curves giving stress as function of 
ﬁber strain. The table data will be extrapolated for both strains 
and temperatures where necessary.  
G23_3 Transverse shear modulus orthogonal to direct ion of 3 rd  ﬁber 
G31_3 Transverse shear modulus in direction of 3 rd  ﬁber 
 *.   
 /u1D̅48|u1D447Cst/u1D45:.st= |summationCv1/u1D̅48|u1D447Cst/co⋯⋯a.st|u1D4J6Cst/u1D45:.st(|u1D7≠6|u1D4J6Cst)|u1D4JBCst
|u1D4J6Cst=|oneCst= |summationCv11
/u1D4:D|u1D4J3|u1D4J6Cst(|u1D7≠6|u1D4J6Cst)(/u1D426|iCst⊗/u1D426|iCst)|u1D4JBCst
|u1D4J6Cst=|oneCst  , 
where the function |u1D4J3|u1D4J6Cst of the ﬁber strain |u1D7≠6|u1D4J6Cst corresponds to the load curve LCEF i. 
|u1D4JB is the number of ﬁber families. 
The shear behavior of the reinforcement can be cont rolled by METH ij.  For val- 
ues less than 10, the behavior is again standard te xtbook mechanics: 
/u1D̅48/u1D446.st/u1D45:.st= |summationCv1/u1D̅48/u1D446.st/co⋯⋯a.st|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst/u1D45:.st|u1D4JBCst−|oneCst
|u1D4J6Cst=|oneCst= |summationCv11
/u1D4:D|u1D4J4|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst(/u1D̅05|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst)(/u1D426|iCst⊗/u1D426|iCst+|oneCst)|u1D4JBCst−|oneCst
|u1D4J6Cst=|oneCst  . 
Here /u1D̅05|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst represents the employed shear measure (scalar prod uct or shear 
angle in radians).  In general, the dyadic product /u1D426|iCst⊗/u1D426|iCst+|oneCst does not deﬁne a 
shear stress tensor.  This formulation might result  in unphysical shear behavior 
in the case of woven fabrics.  Therefore, we devise d METH ij  = 10 and 11 to 
always give a pure shear stress tensor, /u1D̅48/u1D446.st/u1D45:.st.  
For even values of METH ij,  an elastic shear response is assumed.  If deﬁned, 
the load curve LCG ij corresponds to function |u1D4J4|u1D4J6Cst/co⋯⋯a.st|u1D4J7Cst. In this case the values of G ij, 
ALOC ij  and GLOC ij are ignored. 
For odd values of METH ij  on the other hand, an elasto-plastic shear behavio r is 
assumed and the load curve LCG ij deﬁnes the yield stress value as function of 
a normalized shear parameter.  This implies that th e load curve needs to be 
deﬁned for abscissa values between 0.0 and 1.0. A ﬁ rst elastic regime, which is 
controlled by the linear shear stiﬀness G ij , is assumed until the yield stress 
given in the load curve for normalized shear value 0.0 is reached.  A second 
linear elastic regime is deﬁned for shear angles ( /u1D̅0∫|u1D4J6Cst|u1D4J7Cst )/ ﬁber angles ( |u1D7≠2|u1D4J6Cst|u1D4J7Cst ) larger 
than the locking angle ALOC ij . The corresponding stiﬀness in that regime is 
GLOC ij.  At the transition point to the second elastic regi me, the shear stress 
corresponds to the load curve value for a normalize d shear of 1.0. 
2.  History Data.   This material formulation outputs to d3plot  additional data for 
post-processing to the set of history variables if requested.  The parameter 
POSTV speciﬁes the data to be written.  Its value i s calculated as 
POST V = |u1D44∆|oneCst+ 2 |u1D44∆|twoCst+ 4 |u1D44∆|threeCst+8 |u1D44∆|fourCst+ 16 |u1D44∆|fiveCst+ 32 |u1D44∆|sixCst+ 64 |u1D44∆|sevenCst. 
Each ﬂag  |u1D44∆|u1D4J6Cst is a binary number (can be either 1 or 0) and corr esponds to one 
particular type of post-processing variable accordi ng to the following table. 
 *.   
 History Variable # Description 
NXH + 8  Matrix damage parameter |u1D4J1|u1D4JACst 
NXH + 9 → NXH + 11  Fiber tensile damage parameter |u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D461Cst 
NXH + 12 → NXH + 14  Fiber compressive damage param. |u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D4J≠Cst 
NXH + 15 → NXH + 20  Matrix stress tensor in element coordinate system 
NXH+21 → NXH + 26  Deformation gradient 
3.  Description of IHIS.   Some material data can be initialized on an element -by-
element basis through history variables deﬁned with  *INITIAL_STRESS_-
SHELL starting at position HISV5.   
How the data is interpreted depends on the paramete r IHIS. Following the 
same concept as for parameter POSTV, the value of I HIS is computed by the 
following expression: 
I H IS = |u1D44∆|oneCst+ 2 |u1D44∆|twoCst 
Each ﬂag  |u1D44∆|u1D4J6Cst is a binary number (can be either 1 or 0) and corr esponds to one 
particular type of material variable.  So far, the only material variables imple- 
mented are ﬁber orientation in two diﬀerent coordin ate systems, global and 
material.  Thus, at most one of the ﬂags |u1D44∆|oneCst and |u1D44∆|twoCst should be set to 1. 
 
Flag Description Variables # History Var 
|u1D44∆|oneCst Fiber direction  
(in global coordinates) /u1D426|oneCst/g.st, /u1D426|twoCst/g.st, /u1D426|threeCst/g.st 9 
|u1D44∆|twoCst Fiber direction 
(in material coordinates) /u1D426|oneCst|mCst, /u1D426|twoCst|mCst, /u1D426|threeCst|mCst 6 *. _CRASH  
This is Material Type 249. This material model desc ribes a reinforced thermoplastic 
composite material with its damage and failure beha vior.  The reinforcement is 
modeled as an anisotropic hyper-elastic material wi th up to three distinguished ﬁber 
directions.  It can be used to model unidirectional  layers as well as woven and non-
crimped fabrics.  The matrix is modeled with a simp le elastic plastic material 
formulation.  For a composite, the overall stress i s found by adding the ﬁber and matrix 
stresses.  
Card Summary: 
Card 1.   This card is required. 
MID RO EM PRM LCSIGY BETA PFL VISC 
Card 2.   This card is required. 
NFIB AOPT    A1 A2 A3 
Card 3.   This card is required. 
V1 V2 V3 D1 D2 D3 MANGL THICK 
Card 4.   This card is included if VISC > 0. 
VG1 VB1 VG2 VB2 VG3 VB3 VG4 VB4 
Card 5.   This card is required. 
IDF1 ALPH1 EF1 LCEF1 G23_1 G31_1 DAF1 DAM1 
Card 6.   This card is required. 
G12 LCG12 ALOC12 GLOC12 METH12 DAM12   
Card 7.   This card is required. 
IDF2 ALPH2 EF2 LCEF2 G23_2 G31_2 DAF2 DAM2 
Card 8.   This card is required. 
G23 LCG23 ALOC23 GLOC23 METH23 DAM23   
Card 9.   This card is required. 
IDF3 ALPH3 EF3 LCEF3 G23_3 G31_3 DAF3 DAM3 *. _CRASH  
 Card 10.   This card is optional. 
POSTV VISCS IHIS      
Data Card Deﬁnitions: 
 Card 1 1 2 3 4 5 6 7 8 
Variable MID RO EM PRM LCSIGY BETA PFL VISC 
Type A F F F I F F F 
 
 VARIABLE   DESCRIPTION  
MID Material identiﬁcation.  A unique number or label m ust be 
speciﬁed (see *PART). 
RO Mass density, |u1D7≠+ 
N Number of phases 
EM Young’s modulus of matrix material 
PRM Poisson’s ratio for matrix material 
LCSIGY Load curve or table ID for strain hardening of the matrix.  If a 
curve, then it speciﬁes yield stress as a function of eﬀective plastic 
strain.  If a table, then temperatures are the tabl e values indexing 
curves giving yield stress as a function of eﬀec tive plastic strain 
(see *DEFINE_TABLE). 
BETA Parameter for mixed hardening, 0.0 ≤ |u1D6FD ≤ 1.0. Set |u1D6FD=0.0 for pure 
kinematic hardening and |u1D6FD=1.0 for pure isotropic hardening. 
PFL Percentage of layers that must fail to initiate fai lure of the element 
(default is 100) 
VISC Viscous formulation for ﬁbers: 
EQ.0.0: Elastic behavior 
GE.1.0: Viscoelastic behavior modeled with a Prony series.  See 
Remark 3 . 
 *. _CRASH  
  VARIABLE   DESCRIPTION  
D1, D2, D3 Components of vector /u1D41D for AOPT = 2 
MANGL Material angle in degrees for AOPT = 0 and 3. It may be 
overwritten on the element card; see *ELEMENT_SHELL _BETA. 
THICK Balance thickness changes of the material due to th e matrix 
response when calculating the ﬁber stresses.  Stres ses can be 
scaled to account for the fact that ﬁber cross- sectional usually 
does not change. 
EQ.0: No scaling  
EQ.1: Scaling  
 
Fiber Viscosity Card.   Additional card for VISC > 0 only.  See Remark 3 . 
 Card 4 1 2 3 4 5 6 7 8 
Variable VG1 VB1 VG2 VB2 VG3 VB3 VG4 VB4 
Type F F F F F F F F 
 
 VARIABLE   DESCRIPTION  
VG k Relaxation modulus |u1D43A|u1D4J8Cst for the kth  term of the Prony series for 
viscoelastic ﬁbers  
VB k Decay constant |u1D6FD|u1D4J8Cst for the kth  term of the Prony series for 
viscoelastic ﬁbers 
 
 Card 5 1 2 3 4 5 6 7 8 
Variable IDF1 ALPH1 EF1 LCEF1 G23_1 G31_1 DAF1 DAM1 
Type I F F I F F I I 
 
 VARIABLE   DESCRIPTION  
IDF1 ID for 1 st  ﬁber family for post-processing 
ALPH1 Orientation angle |u1D6F+|oneCst for 1 st  ﬁber with respect to overall material 
direction *. _CRASH  
  Card 6 1 2 3 4 5 6 7 8 
Variable G12 LCG12 ALOC12 GLOC12 METH12 DAM12   
Type F I F F I I   
 
 VARIABLE   DESCRIPTION  
G12 Linear shear modulus for shearing between ﬁber fami lies 1 and 2 
LCG12 Curve ID for shear stress as a function of shearing  type as 
speciﬁed with METH12 between the 1 st  and 2 nd  ﬁbers.  See 
Remark 1 . 
ALOC12 Locking angle (in radians) for shear between  ﬁber families 1 and 2  
GLOC12 Linear shear modulus for shear angles larger  than ALOC12 
METH12 Option for shear response between ﬁber 1 and  2 (see Remark 1 ): 
EQ.0: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of the scalar product of the ﬁ ber di- 
rections.  
EQ.1:  Elasto- plastic shear response.  Curve LCG12 speciﬁes 
yield shear stress as a function of the normalized scalar 
product of the ﬁber directions. 
EQ.2: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of shear angle (radians) betwe en the 
ﬁbers. 
EQ.3: Elasto- plastic shear response.  Curve LCG12 deﬁnes 
yield shear stress as a function of normalized shea r an- 
gle between the ﬁbers.  
EQ.4: Elastic shear response.  Curve LCG12 speciﬁes shear  
stress as a function of shear angle (radians) betwe en the 
ﬁbers.  This option is a special implementation for  non-
crimped fabrics, where one of the ﬁber families cor re- 
sponds to a stitching. 
EQ.5: Elasto- plastic shear response.  Curve LCG12 speciﬁes 
yield shear stress as a function of normalized shea r an- 
gle between the ﬁbers.  This option is a special im ple- 
mentation for non- crimped fabrics, where one of the 
ﬁber families corresponds to a stitching.  *. _CRASH  
  VARIABLE   DESCRIPTION  
ﬁber strain (for compression and elongation).  If D AF2 refers to a 
table, then two diﬀerent damage functions for tensi le and 
compressive stresses are input.  The values in the table are 
arbitrary and exist only to index the two curves.  The ﬁrst indexed 
curve is assumed to specify tensile damage as a fun ction of ﬁber 
strains while second curve speciﬁes compressive dam age as a 
function of ﬁber strains.  i nput different damage functions for 
tensile and compressive stresses.  Any other curves  input with the 
table definition are ignored.  
The damager parameter |u1D4J1|twoCst/u1D45:.st ranges from 0.0 for an undamaged 
ﬁber to 1.0 for a failed ﬁber family.  If all famil ies have failed, 
material failure at the integration point is initia ted.  
DAM2 Load curve or table ID for damage parameter |u1D4J1|twoCst|u1D4JACstfor matrix 
material based on the current deformation status of  the 2 nd  ﬁber 
(see Remark 2 ). If a curve, it speciﬁes damage as a function of 
ﬁber strain (for compression and elongation).  If a  table, then the 
values are ﬁber strain rates which index damage as a function of 
ﬁber strain curves. 
The damager parameter |u1D4J1|twoCst|u1D4JACst ranges from 0.0 to 1.5. A value of 0.0 
indicates an undamaged matrix, whereas 1.0 refers t o a 
completely damaged matrix.  To initiate failure of the composite 
at the integration point, a matrix damage |u1D4J1|twoCst|u1D4JACst of 1.5 must be 
reached.  Naturally, the mechanic al behavior of the matrix does 
not change for damage values between 1.0 and 1.5.  
 
 Card 8 1 2 3 4 5 6 7 8 
Variable G23 LCG23 ALOC23 GLOC23 METH23 DAM23   
Type F I F F I F   
 
 VARIABLE   DESCRIPTION  
G23 Linear shear modulus for shearing between ﬁber fami lies 2 and 3 
LCG23 Curve ID for shear stress as a function of shearing  type as 
speciﬁes with METH23 between the 2 nd  and 3 rd  ﬁbers.  See 
Remark 1 . 
ALOC23 Locking angle (in radians) for shear between  ﬁber families 2 and 3  *. _CRASH  
  VARIABLE   DESCRIPTION  
curve is assumed to specify tensile damage as a fun ction of ﬁber 
strains while second curve speciﬁes compressive dam age as a 
function of ﬁber strains.  i nput different damage functions for 
tensile and compressive stresses.  Any other curves  input with the 
table definition are ignored.  
The damager parameter |u1D4J1|threeCst/u1D45:.st ranges from 0.0 for an undamaged 
ﬁber to 1.0 for a failed ﬁber family.  If all famil ies have failed, 
material failure at the integration point is initia ted.  
DAM3 Load curve or table ID for damage parameter |u1D4J1|threeCst|u1D4JACstfor matrix 
material based on the current deformation status of  the 3 rd  ﬁber 
(see Remark 2 ). If a curve, it speciﬁes damage as a function of 
ﬁber strain (for compression and elongation).  If a  table, then the 
values are ﬁber strain rates which index damage as a function of 
ﬁber strain curves. 
The damager parameter |u1D4J1|threeCst|u1D4JACst ranges from 0.0 to 1.5. A value of 0.0 
indicates an undamaged matrix, whereas 1.0 refers t o a 
completely damaged matrix.  To initiate failure of the composite 
at the integration point, a matrix damage |u1D4J1|threeCst|u1D4JACst of 1.5 must be 
reached.  Naturally, the mechanical behavior of the  matrix does 
not change for damage values between 1.0 and 1.5.  
 
The following card is optional. 
 Card 10 1 2 3 4 5 6 7 8 
Variable POSTV VISCS IHIS      
Type F F F      
 
 VARIABLE   DESCRIPTION  
POSTV Parameter for outputting additional history variabl es that might 
be useful for post-processing.  See Remark 4 . 
VISCS Portion of viscous relaxation moduli VG k that is accounted for in 
time step 
size calculation 
IHIS Flag for material properties initialization: 
EQ.0: Material properties deﬁned in Cards 1 - 9 are used *. _CRASH  
 For even values of METH ij,  an elastic shear response is assumed.  If deﬁned, 
the load curve LCG ij corresponds to function |u1D4J4|u1D4J6Cst/co⋯⋯a.st|u1D4J7Cst. In this case the values of G ij, 
ALOC ij  and GLOC ij are ignored. 
For odd values of METH ij  on the other hand, an elasto-plastic shear behavio r is 
assumed and the load curve LCG ij deﬁnes the yield stress value as function of 
a normalized shear parameter.  This implies that th e load curve needs to be 
deﬁned for abscissa values between 0.0 and 1.0. A ﬁ rst elastic regime, which is 
controlled by the linear shear stiﬀness G ij , is assumed until the yield stress 
given in the load curve for normalized shear value 0.0 is reached.  A second 
linear elastic regime is deﬁned for shear angles ( /u1D̅0∫|u1D4J6Cst|u1D4J7Cst )/ ﬁber angles ( |u1D7≠2|u1D4J6Cst|u1D4J7Cst ) larger 
than the locking angle ALOC ij . The corresponding stiﬀness in that regime is 
GLOC ij.  At the transition point to the second elastic regi me, the shear stress 
corresponds to the load curve value for a normalize d shear of 1.0. 
2.  Damage and Failure.   This material features a phenomenological descripti on 
of damage and failure.  User-deﬁned load curves spe cify several damage vari- 
ables as functions of the ﬁber strain values  |u1D7≠6|u1D4J6Cst or shear /u1D̅05|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst. Here, damage 
parameters are always accumulated and cannot decrea se during the simula- 
tion. 
If input parameter DAF i refers to a load curve, it speciﬁes the damage par ame- 
ter |u1D4J1|u1D4J6Cst/u1D45:.st as function of the ﬁber strain |u1D7≠6|u1D4J6Cst. If DAF i refers to a table, the material 
distinguishes between tensile and compressive damag e.  In that case, two pa- 
rameters |u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D461Cst and |u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D4J≠Cst are introduced as functions of the ﬁber strain |u1D7≠6|u1D4J6Cst (given by 
two load curves referred to by the table deﬁnition)  and are both evaluated in 
every time step.  The eﬀective damager parameter |u1D4J1|u1D4J6Cst/u1D45:.st is then deﬁned as  
|u1D4J1|u1D4J6Cst/u1D45:.st(|u1D7≠6|u1D4J6Cst) =
⎩|<raceleftCex⎨|<raceleftCex⎧|u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D4J≠Cst(|u1D7≠6|u1D4J6Cst), |u1D7≠6|u1D4J6Cst< 0
|u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D461Cst(|u1D7≠6|u1D4J6Cst), |u1D7≠6|u1D4J6Cst≥ 0 
The damage parameter |u1D4J1|u1D4J6Cst/u1D45:.st degrades the ﬁber stress contribution /u1D̅48|u1D447Cst/co⋯⋯a.st|u1D4J6Cst/u1D45:.st: 
/u1D̅48/circum⨂lexcmb.h1|u1D447Cst/u1D45:.st= |summationCv1 |parenleftCvJ/u1D̅CF− |u1D4J1|u1D4J6Cst/u1D45:.st(|u1D7≠6|u1D4J6Cst)|parenriµhtCvJ/u1D̅48|u1D447Cst/co⋯⋯a.st|u1D4J6Cst/u1D45:.st(|u1D7≠6|u1D4J6Cst)|u1D4JBCst
|u1D4J6Cst=|oneCst  . 
Failure of the composite material at the integratio n point is initiated as soon as 
all ﬁbers have failed: min 
|u1D4J6Cst|u1D4J1|u1D4J6Cst/u1D45:.st= 1.0 . 
We assume matrix damage to result from the ﬁber str aining and reorientating.  
Consequently, the input includes load curves DAM i and DAM ij  to specify 
damage parameters |u1D4J1|u1D4J6Cst|u1D4JACst(|u1D7≠6|u1D4J6Cst) and |u1D4J1|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst|u1D4JACst|parenleftCv1/u1D̅05|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst|parenriµhtCv1, respectively.  The overall matrix 
damage parameter |u1D4J1|u1D4JACst is given by 
|u1D4J1|u1D4JACst= max |parenleftCv4max 
|u1D4J6Cst≤|u1D4JBCst|u1D4J1|u1D4J6Cst|u1D4JACst(|u1D7≠6|u1D4J6Cst), max 
|u1D4J6Cst<|u1D4JBCst|u1D4J1|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst|u1D4JACst|parenleftCv1/u1D̅05|u1D4J6Cst/co⋯⋯a.st|u1D4J6Cst+|oneCst|parenriµhtCv1|parenriµhtCv4  . *. _CRASH  
 Flag Description Variables # History Var 
|u1D44∆|sixCst Fiber stress tensor |u1D7≠∆|oneCst|oneCst /u1D45:.st, |u1D7≠∆|twoCst|twoCst /u1D45:.st, |u1D7≠∆|threeCst|threeCst /u1D45:.st, |u1D7≠∆|oneCst|twoCst /u1D45:.st, |u1D7≠∆|twoCst|threeCst /u1D45:.st, |u1D7≠∆|threeCst|oneCst /u1D45:.st 6 
|u1D44∆|sevenCst Fiber direction 
(in material coordinates) /u1D426|oneCst|mCst, /u1D426|twoCst|mCst, /u1D426|threeCst|mCst 6 
The above table also shows the order of output as w ell as the number of extra 
history variables associated with the particular ﬂa g.  In total NXH extra varia- 
bles are required depending on the choice of parame ter POSTV. For example, 
the maximum number of additional variables is NXH =  32 for POSTV = 127. 
As mentioned in Remark 1  ﬁber orientation is represented in the material su b- 
routine as vector /u1D426|iCst deﬁned in the element coordinate system.  Prior to  writing 
to the list of histories the vector is transformed into the global coordinate sys- 
tem with three vector components for |u1D44∆|fourCst= 1 and/or into the overall  material 
coordinate system with two vector components for  |u1D44∆|sevenCst= 1. 
A more complete list of potentially helpful history  variables is given in the 
following table.  The variable NEIPS in *DATABASE_E XTENT_BINARY must 
be set to output these history variables. 
 
History Variable # Description 
3 Number of ﬁbers 
4 NXH 
5 → NXH + 4  Variables as described in preceding table 
NXH + 5  POSTV 
NXH + 6, NXH + 7  Shear angles /u1D̅0∫|oneCst|twoCst and /u1D̅0∫|twoCst|threeCst  
NXH + 8  Matrix damage parameter |u1D4J1|u1D4JACst 
NXH + 9 → NXH + 11  Fiber tensile damage parameter |u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D461Cst 
NXH + 12 → NXH + 14  Fiber compressive damage param. |u1D4J1|u1D4J6Cst/u1D45:.st/co⋯⋯a.st|u1D4J≠Cst 
NXH + 15 → NXH + 20  Matrix stress tensor in element coordinate system 
NXH+21 → NXH + 26  Deformation gradient *. _UDFIBER  
 *. _UDFIBER  *. _UDFIBER  
  VARIABLE   DESCRIPTION  
input for the element or in the input for this keyw ord.  
LT.0.0: The absolute value of AOPT is a coordinate system ID  
number (CID on *DEFINE_COORDINATE_ NODES, 
*DEFINE_COORDINATE_SYSTEM or *DEFINE_CO-
ORDINATE_VECTOR). 
XP, YP, ZP Coordinates of point |u1D4JD for AOPT = 1 
A1, A2, A3 Components of vector /u1D41A for AOPT = 2  
 
 Card 3 1 2 3 4 5 6 7 8 
Variable V1 V2 V3 D1 D2 D3 MANGL  
Type F F F F F F F  
 
 VARIABLE   DESCRIPTION  
V1, V2, V3 Components of vector /u1D42F for AOPT = 3 
D1, D2, D3 Components of vector /u1D41D for AOPT = 2 
MANGL Material angle in degrees for AOPT = 0 and.  It may be 
overwritten on the element card; see *ELEMENT_SHELL _BETA. 
 
 Card 4 1 2 3 4 5 6 7 8 
Variable IDF1 ALPH1 EF1 KAP1     
Type I F F F     
 
 Card 5 1 2 3 4 5 6 7 8 
Variable IDF2 ALPH2 EF2 KAP2     
Type I F F F     
 *. _UDFIBER  
 The spatially transversely isotropic neo-Hookean fo rmulation is given by:  
/u1D4:D/u1D̅48|u1D4J6Cst|tCst /r.st= 2|u1D6FD|u1D4J6Cst(/u1D4:C|fourCst− 1)/u1D408+ 2|parenleftCv2|u1D6F+ + 2|u1D6FD|u1D4J6Cstln /u1D4:D+ 2|u1D6F∆|u1D4J6Cst(/u1D4:C|fourCst− 1)|parenriµhtCv2/u1D426|u1D4J6Cst⊗/u1D426|u1D4J6Cst− |u1D6F+(/u1D41B/u1D426|u1D4J6Cst⊗/u1D426|u1D4J6Cst+/u1D426|u1D4J6Cst⊗/u1D41B/u1D426|u1D4J6Cst) 
with material parameters 
|u1D6F+ = |u1D7≠7 − |u1D43A/f.st|iCst /˙.st , |u1D6FD|u1D4J6Cst=|u1D438|iCst|sCst /o.st /u1D̅08|twoCst(1 − |u1D4JB|u1D4J6Cst)
4|u1D4JA|u1D4J6Cst(1 +/u1D̅08), |u1D4JA|u1D4J6Cst= 1 −/u1D̅08− 2|u1D4JB|u1D4J6Cst/u1D̅08|twoCst, 
|u1D6F∆|u1D4J6Cst=|u1D438|u1D4J6Cst/u1D̅05|u1D4J6Cst(1 −/u1D̅08)
8|u1D4JA−|u1D7≠6|u1D4J6Cst+ 2|u1D7≠7 
8+|u1D6F+
2− |u1D6FD|u1D4J6Cst. 
 
The parameter EZDEF activates a modiﬁcation of the model.  Instead of the standard 
deformation gradient, /u1D405, a modiﬁed tensor /u1D405̃ is employed to calculate current ﬁber 
directions /u1D426|u1D4J6Cst and left Cauchy-Green tensor /u1D41B. For tensor /u1D405̃ only the ﬁrst two rows of the 
deformation gradient are updated based on the defor mation of the element.  This 
simpliﬁcation can in some cases increase the stabil ity of the model, especially if the 
structure undergoes large deformations. 
References: 
 [1]  Bonet, J., and A. J. Burton.  "A simple ortho tropic, transversely isotropic hyperelastic constit utive 
equation for large strain computations." Computer methods in applied mechanics and engineeri ng  
162.1 (1998): 151-164. 
 [2]  Senner, T., et al.  "A modular modeling appro ach for describing the in-plane forming behavior of  
unidirectional non-crimp-fabrics." Production Engineering  8.5 (2014): 635-643. 
 [3]  Senner, T., et al.  "Bending of unidirectiona l non-crimp-fabrics: experimental characterization,  
constitutive modeling and application in finite ele ment simulation." Production Engineering  9.1 
(2015): 1-10. 
History Data: 
History Variable #  Description 
3 ID of 1 st  ﬁber 
4 ID of 2 nd  ﬁber 
5 ID of 3 rd  ﬁber 
6 → 8 Current direction of 1 st  ﬁber 
9 → 11 Current direction of 2 nd  ﬁber 
12 → 14 Current direction of 3 rd  ﬁber *